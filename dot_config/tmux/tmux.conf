set-option -g default-shell "/opt/homebrew/bin/fish"

# Set Ctrl-a as the default prefix key combination
# and unbind C-b to free it up
set -g prefix C-a
unbind C-b
# use send-prefix to pass C-a through to application
bind C-a send-prefix

# Start windows numbering at 1
set -g base-index 1
# Start pane numbering at 1
setw -g pane-base-index 1
# Start window numbers at 1 to match keyboard order with tmux window order
set -g base-index 1
setw -g pane-base-index 1
# Renumber windows sequentially after closing any of them
set -g renumber-windows on

set-option -g allow-rename off

# visual notification of activity in other windows
setw -g monitor-activity off
set -g visual-activity off

# Make splitting windows easier
bind-key v split-window -h -c '#{pane_current_path}'
bind-key b split-window -v -c '#{pane_current_path}'

# New windows/pane in $PWD
bind c new-window -c "#{pane_current_path}"

# Disable confirmation when closing windows and panes
bind-key & kill-window
bind-key x kill-pane

# Kill entire session
unbind q
bind-key q kill-session

# Nvim integration
# version_pat='s/^tmux[^0-9]*([.0-9]+).*/\1/p'
#
# is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
#     | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
# bind-key -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
# bind-key -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
# bind-key -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
# bind-key -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"
# tmux_version="$(tmux -V | sed -En "$version_pat")"
# setenv -g tmux_version "$tmux_version"
#
# if-shell -b '[ "$(echo "$tmux_version < 3.0" | bc)" = 1 ]' \
#   "bind-key -n 'C-\\' if-shell \"$is_vim\" 'send-keys C-\\'  'select-pane -l'"
# if-shell -b '[ "$(echo "$tmux_version >= 3.0" | bc)" = 1 ]' \
#   "bind-key -n 'C-\\' if-shell \"$is_vim\" 'send-keys C-\\\\'  'select-pane -l'"
#
# bind-key -T copy-mode-vi C-h select-pane -L
# bind-key -T copy-mode-vi C-j select-pane -D
# bind-key -T copy-mode-vi C-k select-pane -U
# bind-key -T copy-mode-vi C-l select-pane -R
# bind-key -T copy-mode-vi C-\\ select-pane -l

# Statusbar
# Left
  # Session name
  # git repo

# Center
  # Windows
  
# Right
  # time

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'catppuccin/tmux'
set -g @plugin 'jabirali/tmux-tilish'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.config/tmux/plugins/tpm/tpm'
